<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Become a Member - Student Tech Events</title>
    <!-- We link to the SAME stylesheet -->
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <header>
        <div class="logo">
            <a href="index.html">EventDhondo</a>
        </div>
        <nav>
            <a href="index.html">Events</a>
            <a href="newsletter.html" class="active">Become a Member</a>
        </nav>
    </header>

    <main>
        <div class="form-container">
            <h2>Join Our Weekly Newsletter</h2>
            <p>Get a list of upcoming student-friendly tech events delivered to your inbox every week. No spam, ever.
            </p>

            <!-- 
              IMPORTANT: This form will NOT work locally. 
              The 'data-netlify="true"' attribute tells Netlify to handle the submissions
              once we deploy the website.
            -->
            <form id="subscribe-form">
                <input type="email" name="email" placeholder="Enter your email address" required>
                <button type="submit">Subscribe</button>
            </form>
        </div>
    </main>


    <script>
        // Paste your Web App URL from Google Apps Script here
        const GOOGLE_SCRIPT_URL = '__GOOGLE_SCRIPT_URL__'; 
        const form = document.getElementById('subscribe-form');
        const submitButton = form.querySelector('button');

        form.addEventListener('submit', e => {
            e.preventDefault(); // Stop the form from reloading the page

            submitButton.disabled = true;
            submitButton.textContent = 'Subscribing...';

            const email = form.querySelector('input[name="email"]').value;

            fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors', // Important for cross-origin requests to Google Scripts
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ email: email })
            })
                .then(() => {
                    form.innerHTML = '<h2>Thank you for subscribing!</h2><p>You are now a member. Welcome to EventDhondo!</p>';
                })
                .catch(error => {
                    console.error('Error:', error);
                    submitButton.disabled = false;
                    submitButton.textContent = 'Subscribe';
                    alert('Oops! Something went wrong. Please try again.');
                });
        });
    </script>

</body>

</html>